### 二分类模型评估指标解析（ROC-AUC、TPR、特异性）  


#### 一、核心指标定义与公式  

| 指标                | 定义                                                                 | 公式                                                                 |
|---------------------|----------------------------------------------------------------------|----------------------------------------------------------------------|
| **真阳性率（TPR）** | 正确识别的正样本占所有真实正样本的比例（又称“敏感性”）               | `TPR = TP / (TP + FN)`                                               |
| **假阳性率（FPR）** | 错误识别为正样本的负样本占所有真实负样本的比例                       | `FPR = FP / (TN + FP)`                                               |
| **特异性（Specificity）** | 正确识别的负样本占所有真实负样本的比例                               | `Specificity = TN / (TN + FP) = 1 - FPR`                             |
| **ROC-AUC**         | ROC曲线下的面积，综合反映模型在不同阈值下的分类能力                   | 取值范围0.5（随机猜测）~1（完美检测）                               |


#### 二、阈值与指标的关系  

当调整分类阈值时，TPR与FPR会同步变化：  
1. **提高阈值**：更严格判断正样本，导致TPR↓、FPR↓（特异性↑）。  
   - 例：将“正确回答”阈值从0.5→0.8，模型更少误判错误回答（FPR↓），但可能漏检正确回答（TPR↓）。  
2. **降低阈值**：更宽松判断正样本，导致TPR↑、FPR↑（特异性↓）。  
   - 例：阈值降至0.3，模型检测更多正确回答（TPR↑），但也可能误判更多错误回答（FPR↑）。  


#### 三、ROC曲线与AUC的意义  

1. **ROC曲线**：以FPR为横轴、TPR为纵轴，绘制模型在所有可能阈值下的表现。  
2. **AUC的优势**：  
   - 无需指定具体阈值，避免单一阈值的局限性。  
   - 数值越接近1，模型区分正负样本的能力越强。  
   - 例：AUC=0.85的错误检测器优于AUC=0.7的模型。  


#### 四、指标在LLM错误检测中的应用场景  

| 指标                | 核心价值                     | 适用场景举例                     |
|---------------------|------------------------------|----------------------------------|
| **TPR（敏感性）**   | 最大化正确回答的检测率       | 医疗问答纠错（防止重要信息漏判） |
| **特异性**          | 最大化错误回答的检测率       | 金融文本过滤（减少误报）         |
| **AUC**             | 综合评估跨场景的区分能力     | 对比不同错误检测算法的优劣       |


#### 五、案例说明  

假设LLM生成100个回答：60正确（正）、40错误（负）。  
模型检测结果：TP=50，FN=10，FP=15，TN=25。  
- `TPR = 50/60 ≈ 83.3%`  
- `FPR = 15/40 = 37.5%`  
- `特异性 = 1 - 37.5% = 62.5%`  
**结论**：模型“查全”能力强（TPR高），但“查准”能力中等（特异性一般）。